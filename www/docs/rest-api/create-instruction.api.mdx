---
id: create-instruction
title: "Create instruction"
description: "Create a new instruction that defines how an agent should behave, reason, and respond. Instructions act as system-level guidelines that shape the agent's tone, style, constraints, and tool usage."
sidebar_label: "Create instruction"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/rest-api/vectara-rest-api-v-2
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create instruction"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/v2/instructions"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Create a new instruction that defines how an agent should behave, reason, and respond. Instructions act as system-level guidelines that shape the agent's tone, style, constraints, and tool usage.

Instructions support dynamic content using the Apache Velocity templating engine. Velocity variables allow instructions to reference runtime context:

- `\$\tools`: The list of tools available to the agent.
- `\$\{session.metadata.field}`: Session-level metadata (user context, permissions, preferences).
- `\$\{agent.metadata.field}`: Agent-level metadata (configuration or environment).

Example tool iteration:
```velocity
You have access to the following tools:
\#foreach(\$\tool in $tools)
  - \$\{tool.name}: \$\{tool.description}
#end
```
:::tip Tips for effective instruction design
Provide clear, directive language in the template to shape the agentâ€™s behavior. You can emphasize specific requirements using capital letters or negative instructions such as **DO NOT**.

Metadata can personalize behavior. For example:

```velocity
Hello ${session.metadata.user_name}, how can I help with ${session.metadata.department} today?
```

**Example request:**
```json
{
  "name": "Customer Support Tone and Style Guide",
  "description": "Defines tone and behavior for customer interactions.",
  "template": "You are a customer support agent. ALWAYS be polite and DO NOT USE technical jargon.",
  "enabled": true,
  "metadata": {
    "owner": "customer-support-team",
    "version": "1.0.0"
  }
}
```
A successful response returns the full instruction definition, including its unique ID, version, and timestamps.


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"in":"header","name":"Request-Timeout","description":"The API will make a best effort to complete the request in the specified seconds or time out.","schema":{"type":"integer","minimum":1},"required":false},{"in":"header","name":"Request-Timeout-Millis","description":"The API will make a best effort to complete the request in the specified milliseconds or time out.","schema":{"type":"integer","minimum":1}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"required":true,"content":{"application/json":{"schema":{"description":"Request to create an instruction. Currently only initial instructions are supported.","discriminator":{"propertyName":"type","mapping":{"initial":{"description":"Request object for creating a new initial instruction.","allOf":[{"description":"Base properties for creating an instruction, without the type discriminator field.","type":"object","properties":{"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string","example":"Provides initial context and guidelines for customer support interactions"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true,"default":{},"example":{"version":"1.0.0","author":"support-team"}},"enabled":{"description":"Whether the instruction should be enabled upon creation.","type":"boolean","default":true,"example":true}},"required":["name","template"],"title":"InstructionRequestBase"},{"type":"object","properties":{"type":{"description":"The type of instruction to create.","type":"string","default":"initial","example":"initial"}},"required":["type"]}],"x-vectaraParents":["CreateInstructionRequest"],"title":"CreateInitialInstructionRequest"}}},"oneOf":[{"description":"Request object for creating a new initial instruction.","allOf":[{"description":"Base properties for creating an instruction, without the type discriminator field.","type":"object","properties":{"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string","example":"Provides initial context and guidelines for customer support interactions"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true,"default":{},"example":{"version":"1.0.0","author":"support-team"}},"enabled":{"description":"Whether the instruction should be enabled upon creation.","type":"boolean","default":true,"example":true}},"required":["name","template"],"title":"InstructionRequestBase"},{"type":"object","properties":{"type":{"description":"The type of instruction to create.","type":"string","default":"initial","example":"initial"}},"required":["type"]}],"x-vectaraParents":["CreateInstructionRequest"],"title":"CreateInitialInstructionRequest"}],"title":"CreateInstructionRequest"}}}}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"201":{"description":"The response includes the full definition of the newly created instruction, including fields such as `id`, `version`, `created_at`, and `updated_at`.\n","content":{"application/json":{"schema":{"description":"An instruction that guides agent behavior.","discriminator":{"propertyName":"type","mapping":{"initial":{"description":"An initial instruction that provides guidance to the agent before user messages.","type":"object","properties":{"id":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"},"type":{"description":"The type of instruction.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"version":{"description":"The version identifier for this instruction. This is automatically incremented when the instruction is updated.","type":"integer","minimum":1,"example":1},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true},"enabled":{"description":"Whether the instruction is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the instruction was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the instruction was last updated.","type":"string","format":"date-time"}},"required":["id","type","name","template_type","template","version","enabled"],"x-vectaraParents":["Instruction"],"title":"InitialInstruction"}}},"oneOf":[{"description":"An initial instruction that provides guidance to the agent before user messages.","type":"object","properties":{"id":{"description":"The unique identifier for an instruction.","type":"string","pattern":"ins_[0-9a-zA-Z_-]+$","example":"ins_customer_support_init","title":"InstructionId"},"type":{"description":"The type of instruction.","type":"string","default":"initial","example":"initial"},"name":{"description":"The human-readable name of an instruction.","type":"string","minLength":1,"maxLength":50,"example":"Customer Support Initial Instruction","title":"InstructionName"},"description":{"description":"A detailed description of what this instruction does.","type":"string"},"template_type":{"description":"The templating engine used for instructions.","type":"string","enum":["velocity"],"default":"velocity","example":"velocity","title":"TemplateType"},"template":{"description":"The instruction template content using the specified template engine.\n\nAvailable Velocity variables:\n- `$agent.name` - Agent name\n- `$agent.key` - Agent key\n- `$agent.metadata` - Agent metadata map\n- `$session.key` - Session key\n- `$session.metadata` - Session metadata map (includes user-provided context from test/runtime)\n- `$currentDate` - Current date/time in ISO 8601 format (e.g., \"2025-10-24T15:30:45Z\")\n- `$tools` - List of tool maps, each with `name` and `description` fields\n\nExample: `You are a helpful customer support agent. Agent: $agent.name. Today is $currentDate. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end`\n","type":"string","example":"You are an expert customer support agent for $agent.name. Available tools: #foreach($tool in $tools)${tool.name}#if($foreach.hasNext), #end#end","title":"InstructionTemplate"},"version":{"description":"The version identifier for this instruction. This is automatically incremented when the instruction is updated.","type":"integer","minimum":1,"example":1},"metadata":{"description":"Arbitrary metadata associated with the instruction.","type":"object","additionalProperties":true},"enabled":{"description":"Whether the instruction is currently enabled and available for use.","type":"boolean","default":true},"created_at":{"description":"Timestamp when the instruction was created.","type":"string","format":"date-time"},"updated_at":{"description":"Timestamp when the instruction was last updated.","type":"string","format":"date-time"}},"required":["id","type","name","template_type","template","version","enabled"],"x-vectaraParents":["Instruction"],"title":"InitialInstruction"}],"title":"Instruction"}}}},"400":{"description":"Instruction creation request was malformed or contains invalid content.","content":{"application/json":{"schema":{"description":"Error returned when a request contains invalid parameters or violates schema validation.","type":"object","properties":{"field_errors":{"description":"The errors that relate to specific fields in the request.","type":"object","additionalProperties":{"type":"string"}},"messages":{"type":"array","items":{"title":"message","type":"string"}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"BadRequestError"}}}},"403":{"description":"Permissions do not allow creating instructions.","content":{"application/json":{"schema":{"description":"A general error response with an error code and message.","type":"object","properties":{"messages":{"description":"The messages describing why the error occurred.","type":"array","items":{"title":"message","type":"string","example":"Internal server error."}},"request_id":{"description":"The ID of the request that can be used to help Vectara support debug what went wrong.","type":"string"}},"title":"Error"}}}}}}
>
  
</StatusCodes>


      